<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Redemption Law Group â€“ Eligibility Form</title>
  <style>
    /* ðŸ”¹ Base page styles (from your current form2.html) */
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background-color: #f9f9f9;
      color: #333;
    }
    h2 {
      color: #2a2a2a;
      border-bottom: 2px solid #ddd;
      padding-bottom: 0.3rem;
      margin-top: 2rem;
    }
    form {
      background: #fff;
      padding: 2rem;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      max-width: 700px;
      margin: auto;
    }
    label { display: block; margin: 1rem 0 0.3rem; font-weight: bold; }
    .step { display: none; }
    .step.active { display: block; }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select {
      width: 100%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 3px;
      box-sizing: border-box;
    }
    /* ðŸ”¹ Square checkbox styling */
    input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-right: 0.5rem;
      vertical-align: middle;
      accent-color: #0056b3;
    }
    .checkbox-label {
      cursor: pointer;
      display: inline-block;
      margin-right: 1.5rem;
      font-weight: normal;
    }
    /* ðŸ”¹ Next/Back buttons */
    .btn {
      background-color: #0056b3;
      color: #fff;
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 3px;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 1rem;
    }
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    /* ðŸ”¹ Ineligible prompt */
    .ineligible-msg {
      background: #fff3cd;
      border: 1px solid #ffeeba;
      padding: 1rem;
      border-radius: 3px;
      margin: 1rem 0;
    }
  </style>
</head>
<body>
  <h1>Eligibility Form</h1>
  <form id="eligibility-form" novalidate onsubmit="return false;">
    <!-- Step 1: Name -->
    <div id="step-name" class="step active">
      <label for="name">What's your name?</label>
      <input type="text" id="name" name="name" required/>
    </div>

    <!-- Step 2: Email -->
    <div id="step-email" class="step">
      <label for="email">Nice to meet you, <span id="userNameSpan"></span>! What's your email?</label>
      <input type="email" id="email" name="email" required/>
    </div>

    <!-- Step 3: Phone -->
    <div id="step-phone" class="step">
      <label for="phone">Finally, what's your phone number?</label>
      <input type="tel" id="phone" name="phone" required/>
    </div>

    <!-- Step 4: Mailing Address -->
    <div id="step-address" class="step">
      <h2>Mailing Address</h2>
      <label for="street">Street Address</label>
      <input type="text" id="street" name="street" placeholder="123 Main St" required/>
      <label for="city">City</label>
      <input type="text" id="city" name="city" placeholder="Los Angeles" required/>
      <label for="state">State</label>
      <select id="state" name="state" required>
        <option value="">Select a State</option>
        <!-- Add state options here -->
        <option>CA</option>
        <option>NY</option>
        <!-- etc. -->
      </select>
      <label for="zip">ZIP Code</label>
      <input type="text" id="zip" name="zip" placeholder="90210" required/>
    </div>

    <!-- Step 5: Service Selection -->
    <div id="step-service" class="step">
      <h2>Which service are you interested in? <small>(Select one)</small></h2>
      <!-- Square checkboxes in-line with text -->
      <label class="checkbox-label">
        <input type="checkbox" id="service-expungement" name="services" value="expungement"/>
        Record Expungement ($990)
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="service-cor" name="services" value="cor"/>
        Certificate of Rehabilitation ($1,295)
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="service-sealing" name="services" value="sealing"/>
        Arrest Record Sealing ($1,695)
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="service-termination" name="services" value="termination"/>
        Early Probation Termination ($1,695)
      </label>
    </div>

    <!-- Step 6: Expungement Court Type (only for expungement) -->
    <div id="step-court" class="step">
      <h2>Which court handled your conviction?</h2>
      <label class="checkbox-label">
        <input type="checkbox" name="exp_court" value="state"/>
        California State Court
      </label>
      <label class="checkbox-label">
        <input type="checkbox" name="exp_court" value="federal"/>
        Federal Court
      </label>
    </div>

    <!-- Additional expungement questions... -->

    <!-- Disqualifying Offenses (names only) -->
    <div id="step-disqualify" class="step">
      <h2>Disqualifying Offenses</h2>
      <label><input type="checkbox" name="disqualify" value="sex"/>  Sex offense requiring registration</label>
      <label><input type="checkbox" name="disqualify" value="violent"/> Violent felony (e.g., Murder, Armed Robbery)</label>
      <label><input type="checkbox" name="disqualify" value="child"/>  Offense involving child victims</label>
      <label><input type="checkbox" name="disqualify" value="other"/>  Other serious disqualifying offenses</label>
    </div>

    <!-- Ineligible for Expungement -->
    <div id="exp-ineligible" class="step">
      <div class="ineligible-msg">
        <p>Unfortunately, you do not qualify for expungement.</p>
        <p>
          <button class="btn" id="restartCor">Restart and apply for Certificate of Rehabilitation</button>
        </p>
      </div>
    </div>

    <!-- Final Summary / Recommendations -->
    <div id="step-summary" class="step">
      <h2>Recommendations</h2>
      <div id="summary-content"></div>
    </div>

    <!-- Navigation -->
    <div id="navigation">
      <button type="button" id="prevBtn" class="btn">Back</button>
      <button type="button" id="nextBtn" class="btn">Next</button>
    </div>
  </form>

  <script>
    // Basic step logic (showStep & updateStepSequence) must be defined above.
    // Here's the core of your routing and eligibility logic:

    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('eligibility-form');
      const nextBtn = document.getElementById('nextBtn');
      const prevBtn = document.getElementById('prevBtn');
      const restartCor = document.getElementById('restartCor');

      // Step sequence array
      let stepSequence = [
        'step-name','step-email','step-phone','step-address',
        'step-service','step-court','step-disqualify',
        'exp-ineligible','step-summary'
      ];
      let currentStep = 0;

      function showStep(idx) {
        document.querySelectorAll('.step').forEach(s => s.style.display='none');
        const id = stepSequence[idx];
        document.getElementById(id).style.display = 'block';
        prevBtn.style.display = idx>0?'inline-block':'none';
        nextBtn.style.display = id==='exp-ineligible'?'none':'inline-block';
      }

      // Restart for COR if ineligible
      restartCor.addEventListener('click', () => {
        // check COR service box
        document.getElementById('service-cor').checked = true;
        // rebuild sequence: jump to Certificate of Rehabilitation section
        // For simplicity, go to summary or next step
        // ... (implement your COR flow here) ...
        alert('Redirecting to COR flow...');
      });

      // Next button: validation and routing
      nextBtn.addEventListener('click', () => {
        const id = stepSequence[currentStep];
        // if we're on expungement check and not eligible, go to ineligible step
        if (id==='step-court') {
          const court = form.querySelector('input[name="exp_court"]:checked');
          if (!court || court.value==='federal') {
            currentStep = stepSequence.indexOf('exp-ineligible');
            return showStep(currentStep);
          }
        }
        // Basic validation omitted for brevity
        if (currentStep < stepSequence.length-1) {
          currentStep++;
          showStep(currentStep);
        }
      });

      prevBtn.addEventListener('click', () => {
        if (currentStep>0) currentStep--;
        showStep(currentStep);
      });

      // Initial display
      showStep(0);
    });
  </script>
</body>
</html>
