<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Service Eligibility Form</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .step { display: none; }
    .step.active { display: block; }
    .button-group { margin-top: 20px; }
    .button-group button { margin-right: 10px; padding: 8px 16px; }
    label { display: block; margin: 10px 0; }
    .hidden { display: none; }
    .message { margin: 20px 0; color: #b00; }
    .cta-container { text-align: center; padding: 20px; }
    .cta-container h2 { font-size: 1.5em; }
    .cta-container h3 { font-size: 1.2em; margin: 10px 0; text-transform: uppercase; }
    .fee-bubble { display: inline-block; padding: 8px 12px; border: 2px solid #555; border-radius: 20px; margin: 10px 0; }
    .placeholder-stripe, .placeholder-image { margin: 20px 0; padding: 40px; border: 2px dashed #ccc; color: #777; }
    .placeholder-image { margin-top: 10px; }
  </style>
</head>
<body>

<form id="eligibility-form">

  <!-- Step 1 -->
  <div class="step active" id="step-1">
    <h2>Step 1: Your Name</h2>
    <label>First Name *<br>
      <input type="text" id="first-name" required>
    </label>
    <label>Last Name *<br>
      <input type="text" id="last-name" required>
    </label>
    <div class="button-group">
      <button type="button" id="next-1">Next</button>
    </div>
  </div>

  <!-- Step 2 -->
  <div class="step" id="step-2">
    <h2>Step 2: Contact Information</h2>
    <label>Email *<br>
      <input type="email" id="email" required>
    </label>
    <label>Phone *<br>
      <input type="tel" id="phone" required pattern="\d{10}" placeholder="10-digit number">
    </label>
    <div class="button-group">
      <button type="button" id="prev-2">Back</button>
      <button type="button" id="next-2">Next</button>
    </div>
  </div>

  <!-- Step 3 -->
  <div class="step" id="step-3">
    <h2>Step 3: Mailing Address</h2>
    <label>Street Address *<br>
      <input type="text" id="street" required>
    </label>
    <label>City/Town *<br>
      <input type="text" id="city" required>
    </label>
    <label>State *<br>
      <select id="state" required>
        <option value="">Select State</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="DE">Delaware</option>
        <option value="FL">Florida</option>
        <option value="GA">Georgia</option>
        <option value="HI">Hawaii</option>
        <option value="ID">Idaho</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="IA">Iowa</option>
        <option value="KS">Kansas</option>
        <option value="KY">Kentucky</option>
        <option value="LA">Louisiana</option>
        <option value="ME">Maine</option>
        <option value="MD">Maryland</option>
        <option value="MA">Massachusetts</option>
        <option value="MI">Michigan</option>
        <option value="MN">Minnesota</option>
        <option value="MS">Mississippi</option>
        <option value="MO">Missouri</option>
        <option value="MT">Montana</option>
        <option value="NE">Nebraska</option>
        <option value="NV">Nevada</option>
        <option value="NH">New Hampshire</option>
        <option value="NJ">New Jersey</option>
        <option value="NM">New Mexico</option>
        <option value="NY">New York</option>
        <option value="NC">North Carolina</option>
        <option value="ND">North Dakota</option>
        <option value="OH">Ohio</option>
        <option value="OK">Oklahoma</option>
        <option value="OR">Oregon</option>
        <option value="PA">Pennsylvania</option>
        <option value="RI">Rhode Island</option>
        <option value="SC">South Carolina</option>
        <option value="SD">South Dakota</option>
        <option value="TN">Tennessee</option>
        <option value="TX">Texas</option>
        <option value="UT">Utah</option>
        <option value="VT">Vermont</option>
        <option value="VA">Virginia</option>
        <option value="WA">Washington</option>
        <option value="WV">West Virginia</option>
        <option value="WI">Wisconsin</option>
        <option value="WY">Wyoming</option>
      </select>
    </label>
    <label>ZIP Code *<br>
      <input type="text" id="zip" required pattern="\d{5}" placeholder="5-digit ZIP">
    </label>
    <div class="button-group">
      <button type="button" id="prev-3">Back</button>
      <button type="button" id="next-3">Next</button>
    </div>
  </div>

  <!-- Step 4 -->
  <div class="step" id="step-4">
    <h2>Step 4: Which service are you interested in? (Select one)</h2>
    <label><input type="radio" name="service" value="expungement" required> Record Expungement</label>
    <label><input type="radio" name="service" value="certificate"> Certificate of Rehabilitation</label>
    <label><input type="radio" name="service" value="sealing"> Arrest Record Sealing</label>
    <label><input type="radio" name="service" value="termination"> Early Probation Termination</label>
    <div class="button-group">
      <button type="button" id="prev-4">Back</button>
      <button type="button" id="next-4">Next</button>
    </div>
  </div>

  <!-- Record Expungement Questions -->
  <!-- Q1 -->
  <div class="step" id="step-exp-q1">
    <h2>Have you completed all parts of your sentence (such as probation)?</h2>
    <label><input type="radio" name="exp-q1" value="yes" required> Yes</label>
    <label><input type="radio" name="exp-q1" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-exp-q1">Back</button>
      <button type="button" id="next-exp-q1">Next</button>
    </div>
  </div>
  <!-- Q2 -->
  <div class="step" id="step-exp-q2">
    <h2>Do you have any new charges or convictions since that conviction?</h2>
    <label><input type="radio" name="exp-q2" value="no" required> No, I have had no new charges or convictions</label>
    <label><input type="radio" name="exp-q2" value="yes"> Yes</label>
    <div class="button-group">
      <button type="button" id="prev-exp-q2">Back</button>
      <button type="button" id="next-exp-q2">Next</button>
    </div>
  </div>
  <!-- Q3 -->
  <div class="step" id="step-exp-q3">
    <h2>Did you serve any time in state prison for that conviction?</h2>
    <label><input type="radio" name="exp-q3" value="no" required> No</label>
    <label><input type="radio" name="exp-q3" value="yes"> Yes</label>
    <div class="button-group">
      <button type="button" id="prev-exp-q3">Back</button>
      <button type="button" id="next-exp-q3">Next</button>
    </div>
  </div>
  <!-- Q4 (NEW) -->
  <div class="step" id="step-exp-q4">
    <h2>Were you required to pay restitution? If yes, have you paid it in full?</h2>
    <label><input type="radio" name="exp-q4" value="paid-full" required> Yes, I have been required to pay restitution and have paid it in full.</label>
    <label><input type="radio" name="exp-q4" value="paid-part"> Yes, I have been required to pay restitution but I have not paid it in full.</label>
    <label><input type="radio" name="exp-q4" value="not-required"> No, I have not been required to pay restitution.</label>
    <div class="button-group">
      <button type="button" id="prev-exp-q4">Back</button>
      <button type="button" id="next-exp-q4">Next</button>
    </div>
  </div>
  <!-- Q5 (NEW) -->
  <div class="step" id="step-exp-q5">
    <h2>Are you currently facing new charges?</h2>
    <label><input type="radio" name="exp-q5" value="yes" required> Yes</label>
    <label><input type="radio" name="exp-q5" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-exp-q5">Back</button>
      <button type="button" id="next-exp-q5">Next</button>
    </div>
  </div>
  <!-- Q6 (NEW) -->
  <div class="step" id="step-exp-q6">
    <h2>Were you convicted of any of the following? (select all that apply)</h2>
    <label><input type="checkbox" name="exp-q6" value="offense-1"> Sodomy with a child under 14 years old and more than 10 years younger than the defendant</label>
    <label><input type="checkbox" name="exp-q6" value="offense-2"> Lewd or lascivious acts with a child under 14 years old</label>
    <label><input type="checkbox" name="exp-q6" value="offense-3"> Continuous sexual abuse of a child</label>
    <label><input type="checkbox" name="exp-q6" value="offense-4"> Forcible sexual penetration of a minor under 14 years old</label>
    <label><input type="checkbox" name="exp-q6" value="none"> None of the above</label>
    <div class="button-group">
      <button type="button" id="prev-exp-q6">Back</button>
      <button type="button" id="next-exp-q6">Next</button>
    </div>
  </div>

  <!-- Arrest Record Sealing Questions -->
  <div class="step" id="step-seal-q1">
    <h2>Were you ever convicted of a crime from this arrest?</h2>
    <label><input type="radio" name="seal-q1" value="no" required> No</label>
    <label><input type="radio" name="seal-q1" value="yes"> Yes</label>
    <div class="button-group">
      <button type="button" id="prev-seal-q1">Back</button>
      <button type="button" id="next-seal-q1">Next</button>
    </div>
  </div>
  <div class="step" id="step-seal-q2">
    <h2>Is the arrest case completely resolved with no conviction?</h2>
    <label><input type="radio" name="seal-q2" value="yes" required> Yes</label>
    <label><input type="radio" name="seal-q2" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-seal-q2">Back</button>
      <button type="button" id="next-seal-q2">Next</button>
    </div>
  </div>

  <!-- Certificate of Rehabilitation Questions -->
  <div class="step" id="step-cor-q1">
    <h2>Have you completed all your sentences, including any probation or parole?</h2>
    <label><input type="radio" name="cor-q1" value="yes" required> Yes</label>
    <label><input type="radio" name="cor-q1" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-cor-q1">Back</button>
      <button type="button" id="next-cor-q1">Next</button>
    </div>
  </div>
  <div class="step" id="step-cor-q2">
    <h2>Has it been several years since your last conviction or release?</h2>
    <label><input type="radio" name="cor-q2" value="yes" required> Yes</label>
    <label><input type="radio" name="cor-q2" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-cor-q2">Back</button>
      <button type="button" id="next-cor-q2">Next</button>
    </div>
  </div>
  <div class="step" id="step-cor-q3">
    <h2>Are you currently a California resident?</h2>
    <label><input type="radio" name="cor-q3" value="yes" required> Yes</label>
    <label><input type="radio" name="cor-q3" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-cor-q3">Back</button>
      <button type="button" id="next-cor-q3">Next</button>
    </div>
  </div>

  <!-- Early Probation Termination Questions -->
  <div class="step" id="step-term-q1">
    <h2>Have you served at least half of your probation term?</h2>
    <label><input type="radio" name="term-q1" value="yes" required> Yes</label>
    <label><input type="radio" name="term-q1" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-term-q1">Back</button>
      <button type="button" id="next-term-q1">Next</button>
    </div>
  </div>
  <div class="step" id="step-term-q2">
    <h2>Have you fulfilled all court requirements (fines, restitution, programs)?</h2>
    <label><input type="radio" name="term-q2" value="yes" required> Yes</label>
    <label><input type="radio" name="term-q2" value="no"> No</label>
    <div class="button-group">
      <button type="button" id="prev-term-q2">Back</button>
      <button type="button" id="next-term-q2">Next</button>
    </div>
  </div>
  <div class="step" id="step-term-q3">
    <h2>Have you had any probation violations?</h2>
    <label><input type="radio" name="term-q3" value="no" required> No</label>
    <label><input type="radio" name="term-q3" value="yes"> Yes</label>
    <div class="button-group">
      <button type="button" id="prev-term-q3">Back</button>
      <button type="button" id="next-term-q3">Next</button>
    </div>
  </div>

  <!-- Final CTA Pages -->
  <!-- Expungement CTA -->
  <div class="step" id="step-cta-expungement">
    <div class="cta-container">
      <h2>One last thing…</h2>
      <h3>RECORD EXPUNGEMENT</h3>
      <div class="fee-bubble">$990 once-off</div>
      <p>Our Record Expungement service helps you clear eligible convictions from your record, restoring your rights and giving you a fresh start.</p>
      <div class="placeholder-stripe">[ STRIPE PAYMENT METHODS HERE ]</div>
      <div class="placeholder-image">[ Money-Back Guarantee Badge or Doodle ]</div>
      <button type="button" onclick="redirectToStripe('expungement')">Pay Now &amp; Submit For Review</button>
    </div>
  </div>
  <!-- Certificate CTA -->
  <div class="step" id="step-cta-certificate">
    <div class="cta-container">
      <h2>One last thing…</h2>
      <h3>CERTIFICATE OF REHABILITATION</h3>
      <div class="fee-bubble">$1,470 once-off</div>
      <p>Our Certificate of Rehabilitation service helps you secure a court-issued certificate that serves as official proof of your rehabilitation.</p>
      <div class="placeholder-stripe">[ STRIPE PAYMENT METHODS HERE ]</div>
      <div class="placeholder-image">[ Money-Back Guarantee Badge or Doodle ]</div>
      <button type="button" onclick="redirectToStripe('certificate')">Pay Now &amp; Submit For Review</button>
    </div>
  </div>
  <!-- Sealing CTA -->
  <div class="step" id="step-cta-sealing">
    <div class="cta-container">
      <h2>One last thing…</h2>
      <h3>ARREST RECORD SEALING</h3>
      <div class="fee-bubble">$990 once-off</div>
      <p>Our Arrest Record Sealing service helps you petition the court to seal eligible arrest records, keeping them private.</p>
      <div class="placeholder-stripe">[ STRIPE PAYMENT METHODS HERE ]</div>
      <div class="placeholder-image">[ Money-Back Guarantee Badge or Doodle ]</div>
      <button type="button" onclick="redirectToStripe('sealing')">Pay Now &amp; Submit For Review</button>
    </div>
  </div>
  <!-- Termination CTA -->
  <div class="step" id="step-cta-termination">
    <div class="cta-container">
      <h2>One last thing…</h2>
      <h3>EARLY PROBATION TERMINATION</h3>
      <div class="fee-bubble">$850 once-off</div>
      <p>Our Early Probation Termination service helps you petition the court to end your probation early, clearing the way for record relief.</p>
      <div class="placeholder-stripe">[ STRIPE PAYMENT METHODS HERE ]</div>
      <div class="placeholder-image">[ Money-Back Guarantee Badge or Doodle ]</div>
      <button type="button" onclick="redirectToStripe('termination')">Pay Now &amp; Submit For Review</button>
    </div>
  </div>

</form>

<script>
  // Utility to show/hide steps
  function showStep(id) {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    const el = document.getElementById(id);
    if (el) el.classList.add('active');
    window.scrollTo(0,0);
  }

  // Redirect to (placeholder) Stripe checkout
  function redirectToStripe(service) {
    // Replace these URLs with your real Stripe checkout URLs
    const urls = {
      expungement: 'https://stripe.com/checkout?service=expungement',
      certificate: 'https://stripe.com/checkout?service=certificate',
      sealing: 'https://stripe.com/checkout?service=sealing',
      termination: 'https://stripe.com/checkout?service=termination'
    };
    window.location.href = urls[service];
  }

  // Handlers for each step
  document.getElementById('next-1').onclick = () => {
    if (!document.getElementById('first-name').value.trim() || !document.getElementById('last-name').value.trim()) {
      alert('Please enter both first and last name.');
      return;
    }
    showStep('step-2');
  };
  document.getElementById('prev-2').onclick = () => showStep('step-1');
  document.getElementById('next-2').onclick = () => {
    const email = document.getElementById('email'), phone = document.getElementById('phone');
    if (!email.checkValidity()) { alert('Please enter a valid email.'); return; }
    if (!phone.checkValidity()) { alert('Please enter a valid 10-digit phone number.'); return; }
    showStep('step-3');
  };
  document.getElementById('prev-3').onclick = () => showStep('step-2');
  document.getElementById('next-3').onclick = () => {
    const street = document.getElementById('street'),
          city = document.getElementById('city'),
          state = document.getElementById('state'),
          zip = document.getElementById('zip');
    if (!street.value.trim() || !city.value.trim() || !state.value || !zip.checkValidity()) {
      alert('Please complete your full mailing address.');
      return;
    }
    showStep('step-4');
  };
  document.getElementById('prev-4').onclick = () => showStep('step-3');
  document.getElementById('next-4').onclick = () => {
    const svc = document.querySelector('input[name="service"]:checked');
    if (!svc) { alert('Please select one service.'); return; }
    switch (svc.value) {
      case 'expungement': showStep('step-exp-q1'); break;
      case 'certificate': showStep('step-cor-q1'); break;
      case 'sealing': showStep('step-seal-q1'); break;
      case 'termination': showStep('step-term-q1'); break;
    }
  };

  // --- Expungement branching ---
  document.getElementById('prev-exp-q1').onclick = () => showStep('step-4');
  document.getElementById('next-exp-q1').onclick = () => {
    const ans = document.querySelector('input[name="exp-q1"]:checked').value;
    if (ans === 'no') {
      // Redirect to Early Probation Termination
      showStep('step-term-q1');
    } else {
      showStep('step-exp-q2');
    }
  };

  document.getElementById('prev-exp-q2').onclick = () => showStep('step-exp-q1');
  document.getElementById('next-exp-q2').onclick = () => {
    const ans = document.querySelector('input[name="exp-q2"]:checked').value;
    if (ans === 'yes') {
      // Ineligible: new charges
      document.getElementById('step-exp-q2').innerHTML = `
        <p class="message">
          Unfortunately, you are not eligible for expungement while you have other criminal charges pending against you.
          Please feel free to contact us if you have any further queries, comments or concerns.
        </p>
        <div class="button-group">
          <button type="button" onclick="window.location.href='https://redemption.legal/'">Back To Homepage</button>
          <button type="button" onclick="window.open('https://help.redemption.legal','_blank')">Contact Support</button>
        </div>
      `;
      return;
    }
    showStep('step-exp-q3');
  };

  document.getElementById('prev-exp-q3').onclick = () => showStep('step-exp-q2');
  document.getElementById('next-exp-q3').onclick = () => {
    const ans = document.querySelector('input[name="exp-q3"]:checked').value;
    if (ans === 'yes') {
      // Redirect to Certificate of Rehabilitation
      showStep('step-cor-q1');
    } else {
      showStep('step-exp-q4');
    }
  };

  // Q4: Restitution
  document.getElementById('prev-exp-q4').onclick = () => showStep('step-exp-q3');
  document.getElementById('next-exp-q4').onclick = () => {
    const ans = document.querySelector('input[name="exp-q4"]:checked').value;
    if (ans === 'paid-part') {
      document.getElementById('step-exp-q4').innerHTML = `
        <p class="message">
          Unfortunately, you need to pay your restitution in full first before seeking an expungement.
          Please try again after restitution has been paid in full.
          Please feel free to contact us if you have any further queries, comments or concerns.
        </p>
        <div class="button-group">
          <button type="button" onclick="window.location.href='https://redemption.legal/'">Back To Homepage</button>
          <button type="button" onclick="window.open('https://help.redemption.legal','_blank')">Contact Support</button>
        </div>
      `;
      return;
    }
    showStep('step-exp-q5');
  };

  // Q5: Facing new charges
  document.getElementById('prev-exp-q5').onclick = () => showStep('step-exp-q4');
  document.getElementById('next-exp-q5').onclick = () => {
    const ans = document.querySelector('input[name="exp-q5"]:checked').value;
    if (ans === 'yes') {
      document.getElementById('step-exp-q5').innerHTML = `
        <p class="message">
          Unfortunately, you are not eligible for expungement while you have other criminal charges pending against you.
          Please feel free to contact us if you have any further queries, comments or concerns.
        </p>
        <div class="button-group">
          <button type="button" onclick="window.location.href='https://redemption.legal/'">Back To Homepage</button>
          <button type="button" onclick="window.open('https://help.redemption.legal','_blank')">Contact Support</button>
        </div>
      `;
      return;
    }
    showStep('step-exp-q6');
  };

  // Q6: Disqualifying convictions
  document.getElementById('prev-exp-q6').onclick = () => showStep('step-exp-q5');
  document.getElementById('next-exp-q6').onclick = () => {
    const checked = Array.from(document.querySelectorAll('input[name="exp-q6"]:checked')).map(i => i.value);
    if (checked.includes('none')) {
      // go to final expungement CTA
      showStep('step-cta-expungement');
    } else if (checked.length > 0) {
      // disqualified
      document.getElementById('step-exp-q6').innerHTML = `
        <p class="message">
          Unfortunately anyone convicted of these offences are not eligible for Record Expungement or a Certificate of Rehabilitation.
        </p>
        <div class="button-group">
          <button type="button" onclick="window.location.href='https://redemption.legal/'">Back To Homepage</button>
        </div>
      `;
    } else {
      alert('Please select at least one option.');
    }
  };

  // --- Sealing branching ---
  document.getElementById('prev-seal-q1').onclick = () => showStep('step-4');
  document.getElementById('next-seal-q1').onclick = () => {
    const ans = document.querySelector('input[name="seal-q1"]:checked').value;
    if (ans === 'yes') {
      document.getElementById('step-seal-q1').innerHTML = `
        <p class="message">
          Arrest Record Sealing isn’t applicable if you were convicted. An expungement would be the right path.
        </p>
        <div class="button-group">
          <button type="button" onclick="showStep('step-exp-q1')">Go to Expungement Questions</button>
          <button type="button" onclick="window.location.href='https://redemption.legal/'">Start Over</button>
        </div>
      `;
      return;
    }
    showStep('step-seal-q2');
  };

  document.getElementById('prev-seal-q2').onclick = () => showStep('step-seal-q1');
  document.getElementById('next-seal-q2').onclick = () => {
    const ans = document.querySelector('input[name="seal-q2"]:checked').value;
    if (ans === 'no') {
      document.getElementById('step-seal-q2').innerHTML = `
        <p class="message">
          You cannot seal the record until the case is fully resolved with no conviction.
        </p>
        <div class="button-group">
          <button type="button" onclick="window.location.href='https://redemption.legal/'">Back To Homepage</button>
        </div>
      `;
      return;
    }
    showStep('step-cta-sealing');
  };

  // --- Certificate branching ---
  document.getElementById('prev-cor-q1').onclick = () => showStep('step-4');
  document.getElementById('next-cor-q1').onclick = () => {
    const ans = document.querySelector('input[name="cor-q1"]:checked').value;
    if (ans === 'no') {
      // could stop early, but we'll continue to give full rungs of feedback
    }
    showStep('step-cor-q2');
  };
  document.getElementById('prev-cor-q2').onclick = () => showStep('step-cor-q1');
  document.getElementById('next-cor-q2').onclick = () => {
    showStep('step-cor-q3');
  };
  document.getElementById('prev-cor-q3').onclick = () => showStep('step-cor-q2');
  document.getElementById('next-cor-q3').onclick = () => {
    const ans1 = document.querySelector('input[name="cor-q1"]:checked').value;
    const ans2 = document.querySelector('input[name="cor-q2"]:checked').value;
    const ans3 = document.querySelector('input[name="cor-q3"]:checked').value;
    if (ans1==='yes' && ans2==='yes' && ans3==='yes') {
      showStep('step-cta-certificate');
    } else {
      document.getElementById('step-cor-q3').innerHTML = `
        <p class="message">
          You are not currently eligible for a Certificate of Rehabilitation based on your responses.
        </p>
        <div class="button-group">
          <button type="button" onclick="window.location.href='https://redemption.legal/'">Back To Homepage</button>
          <button type="button" onclick="window.open('https://help.redemption.legal','_blank')">Contact Support</button>
        </div>
      `;
    }
  };

  // --- Termination branching ---
  document.getElementById('prev-term-q1').onclick = () => showStep('step-4');
  document.getElementById('next-term-q1').onclick = () => showStep('step-term-q2');
  document.getElementById('prev-term-q2').onclick = () => showStep('step-term-q1');
  document.getElementById('next-term-q2').onclick = () => showStep('step-term-q3');
  document.getElementById('prev-term-q3').onclick = () => showStep('step-term-q2');
  document.getElementById('next-term-q3').onclick = () => {
    showStep('step-cta-termination');
  };
</script>

</body>
</html>
